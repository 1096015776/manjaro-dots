let bookmarks=null,sidebar=null,list=document.createElement("ul"),isBookmarkExist=null;chrome.runtime.onMessage.addListener(a=>{"update-sidebar"===a.action&&getBookmarks().then(a=>{bookmarks=a,generateBookmarksList()})}),setTimeout(()=>{getBookmarks().then(a=>{bookmarks=a,initSidebar(),checkSettings(),window.onfocus=()=>{checkSettings()}})},200);function initSidebar(){sidebar=document.createElement("div"),sidebar.id="new-tab-sidebar",sidebar.innerHTML=`<div class="wrap">        <img class="new-tab-logo" src="${chrome.runtime.getURL("img/128x128.png")}">            </div>`,sidebar.children[0].appendChild(generateBookmarksList()),document.body.appendChild(sidebar)}function generateBookmarksList(){let a="";for(let b=0;b<bookmarks.length;b++)bookmarks[b].pin&&(a+=`<li><a href="${bookmarks[b].url}"><img class="fav" src="${"https://www.google.com/s2/favicons?domain="+bookmarks[b].url}"><span class="title">${bookmarks[b].title}</span></a></li>`);return 0<a.length?(isBookmarkExist=!0,sidebar.classList.remove("hidden")):(isBookmarkExist=!1,sidebar.classList.add("hidden")),list.innerHTML=a,list}function checkSettings(){chrome.storage.local.get(["showSidebar"],a=>{!0==a.showSidebar&&isBookmarkExist?sidebar.classList.remove("hidden"):sidebar.classList.add("hidden")})}function getBookmarks(){return new Promise(a=>{chrome.storage.local.get(["bookmarks"],b=>{bookmarks=b.bookmarks,a(b.bookmarks)})})}